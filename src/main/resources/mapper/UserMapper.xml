<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shsoftvina.erpshsoftvina.mapper.UserMapper">

    <select id="findByEmailAndStatus" parameterType="com.shsoftvina.erpshsoftvina.entity.User" resultMap="userResultMap">
        SELECT *
        FROM user
        where email = #{email} AND status = #{status}
    </select>
    <select id="findUserDetailById" parameterType="com.shsoftvina.erpshsoftvina.entity.User" resultMap="userResultMap">
        SELECT *
        FROM user
        where id = #{id}
    </select>
    <select id="findUserCheckRegister" parameterType="com.shsoftvina.erpshsoftvina.entity.User" resultMap="userResultMap">
        SELECT *
        FROM user
        where email = #{email} OR username = #{username}
    </select>
    <insert id="registerUser" parameterType="com.shsoftvina.erpshsoftvina.entity.User">
        INSERT
        INTO user (username, email, id, password, status)
        VALUES (#{username}, #{email}, #{id},#{password}, #{status});
    </insert>
    <update id="updateUser" parameterType="com.shsoftvina.erpshsoftvina.entity.User">
        UPDATE user
        SET username = #{username},
            fullname = #{fullname},
            date_of_birth = #{dateOfBirth},
            phone = #{phone},
            emergency_phone = #{emergencyPhone},
            avatar = #{avatar},
            type = #{type},
            department = #{department},
            job_start_date = #{jobStartDate},
            contract = #{contract},
            basic_salary = #{basicSalary},
            allowance = #{allowance},
            insurance = #{insurance},
            atm = #{atm},
            email = #{email},
            role = #{role},
            status = #{status},
            password = #{password}
        WHERE id = #{id};

    </update>


    <resultMap id="userResultMap" type="com.shsoftvina.erpshsoftvina.entity.User">
        <id property="id" column="id"/>
        <result property="fullname" column="fullname"/>
        <result property="dateOfBirth" column="date_of_birth"/>
        <result property="phone" column="phone"/>
        <result property="emergencyPhone" column="emergency_phone"/>
        <result property="avatar" column="avatar"/>
        <result property="type" column="type"/>
        <result property="department" column="department"/>
        <result property="jobStartDate" column="job-start-date"/>
        <result property="contract" column="contract"/>
        <result property="basicSalary" column="basic-salary"/>
        <result property="allowance" column="allowance"/>
        <result property="insurance" column="insurance"/>
        <result property="atm" column="atm"/>
        <result property="username" column="username"/>
        <result property="email" column="email"/>
        <result property="password" column="password"/>
        <result property="role" column="role"/>
        <result property="status" column="status"/>
    </resultMap>

</mapper>